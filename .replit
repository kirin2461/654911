modules = ["nodejs-20", "go-1.23"]

[nix]
channel = "stable-24_05"

[deployment]
run = ["sh", "-c", "cd backend && go run cmd/server/main.go & cd frontend && npm run dev"]
build = ["sh", "-c", "cd backend && go build -o server cmd/server/main.go && cd ../frontend && npm install && npm run build"]

[[ports]]
localPort = 3000
externalPort = 80

[[ports]]
localPort = 8080
externalPort = 8080
